---
// src/layouts/Layout.astro
// Base layout - V2 Debugging Stack Overflow - Schema component REMOVED

import FloatingBookButton from '../components/FloatingBookButton.astro';
// import SchemaMarkup from '../components/SchemaMarkup.astro'; // Temporarily commented out

// Props for title and description
interface Props {
	title: string;
	description?: string;
    // Schema props passed directly from the page (but not used here)
    schemaType?: string;
    schemaData?: object;
}

const {
    title,
    description = 'Redi Roma BnB - Charming & Affordable Stays near San Giovanni & Colosseum, Rome.',
    // Get schema details directly from the page props (not currently used)
    // schemaType = 'WebPage',
    // schemaData = {}
} = Astro.props;

// --- NEW THEME ---
const theme = {
	colors: {
		primary: '#4A6B63',     // Roman olive green
		accent: '#DAA520',      // Terracotta gold
		background: '#F8F5F2',  // Antique parchment white
		textDark: '#333333',
		textLight: '#FFFFFF'
	},
	fonts: {
		heading: "'Playfair Display', serif",
		body: "'Inter', sans-serif"
	}
};

// Schema handling is removed for debugging
// const schemaToUse = schemaData;
// const effectiveSchemaType = schemaType;
---

<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<meta name="description" content={description} />

	{/* Preconnect/Prefetch */}
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="preconnect" href="https://booking-engine.example.com"> {/* Replace */}
	<link rel="dns-prefetch" href="https://booking-engine.example.com"> {/* Replace */}

	{/* Favicon placeholder */}
	<link rel="icon" type="image/svg+xml" href="/favicon.svg" /> {/* Replace */}

	{/* Fonts */}
	<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">

    {/* Preload Critical CSS (Example) */}
    {/* <link rel="preload" href="/styles/booking-critical.css" as="style"> */}

	<title>{title} | Redi Roma BnB</title>

    {/* Schema Markup component is commented out for debugging */}
    {/* <SchemaMarkup type={effectiveSchemaType} data={schemaToUse} /> */}

    {/* Global Styles with CSS Variables */}
	<style define:vars={{
        'color-primary': theme.colors.primary,
        'color-accent': theme.colors.accent,
        'color-background': theme.colors.background,
        'color-text-dark': theme.colors.textDark,
        'color-text-light': theme.colors.textLight,
        'font-heading': theme.fonts.heading,
        'font-body': theme.fonts.body
    }}>
		/* Basic Reset & Body Styles */
		*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
		html { scroll-behavior: smooth; font-size: 100%; }
		body { font-family: var(--font-body); color: var(--color-text-dark); line-height: 1.7; background-color: var(--color-background); -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; }
		h1, h2, h3, h4, h5, h6 { font-family: var(--font-heading); margin-bottom: 0.75em; line-height: 1.3; color: var(--color-primary); }
        h1 { font-size: 2.5rem; } h2 { font-size: 2rem; } h3 { font-size: 1.5rem; }
		img, picture, video, canvas, svg { max-width: 100%; height: auto; display: block; }
		a { color: var(--color-accent); text-decoration: none; transition: color 0.3s ease; }
		a:hover { color: color-mix(in srgb, var(--color-accent) 80%, black); text-decoration: underline; }
        button, .button { display: inline-block; padding: 0.75rem 1.5rem; font-family: var(--font-body); font-weight: bold; text-align: center; border-radius: 50px; cursor: pointer; transition: background-color 0.3s ease, transform 0.2s ease; border: none; font-size: 0.9rem; letter-spacing: 0.5px; text-transform: uppercase; }
        .button-primary { background-color: var(--color-primary); color: var(--color-text-light); }
        .button-primary:hover { background-color: color-mix(in srgb, var(--color-primary) 85%, black); transform: translateY(-2px); }
         .button-accent { background-color: var(--color-accent); color: var(--color-text-light); }
        .button-accent:hover { background-color: color-mix(in srgb, var(--color-accent) 85%, black); transform: translateY(-2px); }
		.container { max-width: 1140px; margin-left: auto; margin-right: auto; padding-left: 1rem; padding-right: 1rem; }
		.main-header { padding: 1rem 0; border-bottom: 1px solid color-mix(in srgb, var(--color-primary) 15%, transparent); background-color: var(--color-background); position: sticky; top: 0; z-index: 100; box-shadow: 0 2px 5px rgba(0,0,0,0.05); }
        .header-content { display: flex; justify-content: space-between; align-items: center; }
        .logo a { font-family: var(--font-heading); font-size: 1.8rem; font-weight: bold; color: var(--color-primary); text-decoration: none; }
        .logo a:hover { color: var(--color-primary); text-decoration: none; }
		.main-nav ul { list-style: none; display: flex; gap: 2rem; }
		.main-nav a { font-weight: bold; text-transform: uppercase; font-size: 0.85rem; letter-spacing: 0.8px; color: var(--color-primary); position: relative; padding-bottom: 5px; }
        .main-nav a::after { content: ''; position: absolute; width: 0; height: 2px; bottom: 0; left: 0; background-color: var(--color-accent); transition: width 0.3s ease; }
        .main-nav a:hover { color: var(--color-primary); text-decoration: none; }
         .main-nav a:hover::after { width: 100%; }
		.main-footer { text-align: center; margin-top: 4rem; padding: 3rem 1rem; background-color: color-mix(in srgb, var(--color-primary) 95%, white); border-top: 3px solid var(--color-primary); font-size: 0.9rem; color: var(--color-text-dark); }
        .main-footer p { margin-bottom: 0.5rem; }
        .footer-links a { margin: 0 0.75rem; color: var(--color-primary); font-weight: bold; }
        .footer-links a:hover { color: var(--color-accent); }
        .visually-hidden { position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0, 0, 0, 0); white-space: nowrap; border: 0; }
	</style>
	<slot name="head" /> {/* Page-specific head elements */}
</head>
<body>
    <a href="#main-content" class="visually-hidden focusable skip-link">Skip to main content</a>

	{/* Header */}
	<header class="main-header">
        <div class="container header-content">
            <div class="logo">
                <a href="/" aria-label="Redi Roma BnB Homepage">Redi Roma BnB</a>
            </div>
            <nav class="main-nav" aria-label="Main Navigation">
                <ul>
                    <li><a href="/rooms">Rooms</a></li>
                    <li><a href="/location">Location</a></li>
                    <li><a href="/families">Families</a></li>
                    <li><a href="/blog">Blog</a></li>
                    <li><a href="/contact">Contact</a></li>
                </ul>
            </nav>
        </div>
    </header>

	{/* Main Content Area */}
	<main id="main-content">
		<slot /> {/* Page specific content goes here */}
	</main>

	{/* Footer */}
	<footer class="main-footer">
        <div class="container">
            <p>&copy; {new Date().getFullYear()} Redi Roma BnB. All rights reserved.</p>
            <p>P.IVA [Your VAT Number] | [Your Street Address], Rome</p>
            <div class="footer-links">
                <a href="/privacy-policy">Privacy Policy</a> |
                <a href="/cookie-policy">Cookie Policy</a> |
                <a href="/contact">Contact Us</a>
            </div>
        </div>
	</footer>

	{/* Placeholders for Sticky Booking Elements */}
    <div id="booking-widget-desktop-placeholder"></div>
    <div id="booking-bar-mobile-placeholder"></div>

	{/* Slot for page-specific scripts */}
	<slot name="body-end" />
</body>
</html>
